PIO EQU 30H
PIC EQU 20H

ORG 1000H
MSJ DB ?

ORG 80H
DIR_SUB DW 3500H

ORG 3500H
MOV BX, OFFSET MSJ
IMPRIMIR: CMP CH, CL
          JZ FIN
          MOV AL, [BX]
          OUT PIO+1, AL
          MOV AL, PIO
          OR AL, 02H
          OUT PIO, AL
          MOV AL, PIO
          AND AL, 0FDH
          OUT PIO, AL
          INC BX
          DEC CL
          JMP IMPRIMIR
     FIN: MOV BX, OFFSET MSJ
          IRET

ORG 2000H
CLI
MOV AL, 0FDH
OUT PIO+2, AL
MOV AL, 0
OUT PIO+3, AL
IN AL, PIO
AND AL, 0FDH
OUT PIO, AL
MOV AL, 0FEH
OUT PIC+1, AL
MOV AL, 20
OUT PIC+4, AL
MOV BX, OFFSET MSJ
MOV CL, 0
MOV CH, 0
STI
LOOP: INT 6
      INC BX
      INC CL
      JMP LOOP
      INT 0
      END
